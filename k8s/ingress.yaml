apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: app-ingress
  annotations:
    # Dòng này giúp xử lý đường dẫn mượt hơn (tùy chọn nhưng nên có)
    nginx.ingress.kubernetes.io/use-regex: "true"
spec:
  ingressClassName: nginx
  rules:
  - http:
      paths:
      # Quy tắc 1: Đường dẫn bắt đầu bằng /api -> Vào API Service
      - path: /
        pathType: Prefix
        backend:
          service:
            name: api-service
            port:
              number: 3000
      
      # Quy tắc 2: Đường dẫn /health -> Vào API Service (để check sức khỏe)
      - path: /health
        pathType: Prefix
        backend:
          service:
            name: api-service
            port:
              number: 3000